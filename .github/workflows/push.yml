name: Push workflow

on: [push]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@master
      if:
        github.event.deleted == false &&
        contains(github.event.commits.message, '[skip ci]') == false
    - name: Dump GitHub context
      env:
        GITHUB_CONTEXT: ${{ toJson(github) }}
      run: echo "$GITHUB_CONTEXT"
    - name: Docker build
      run: docker build -t peaceiris/actions-hugo .
    - name: Check Hugo version
      run: docker run peaceiris/actions-hugo:latest version
