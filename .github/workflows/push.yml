name: Push workflow

on: [push]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@master
    - name: Dump GitHub context
      env:
        GITHUB_CONTEXT: ${{ toJson(github) }}
      run: |
        echo "$GITHUB_CONTEXT"
    - name: Docker build
      if:
        github.event.deleted == false &&
        github.event_name != 'create'
      run: docker build -t peaceiris/actions-hugo .
    - name: Check Hugo version
      if: success()
      run: docker run peaceiris/actions-hugo:latest version
